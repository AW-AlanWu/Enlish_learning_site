{% extends 'base.html' %}

{% block title %} {{title}} {% endblock %}

{% block script %}
    {% csrf_token %}
    {% load static %}
    <script src="{% static 'js/post_to_url.js' %}"></script>
    <script>
        const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

        function delMeaning(button) {
            var id = button.parentNode.id;
            var msg = "您真的確定要刪除嗎？\n\n請確認！";
            if (confirm(msg)==true){
                post_to_url("{% url 'words:DelMeaning'%}", {'id' : id});
            } else{
                return;
            }
        }
    </script>
{% endblock %}

{% block content %}
    {% if Meaning_list %}
        <ul class = "list-unstyled">
            {% for Meaning in Meaning_list %}
                <li id = "{{ Meaning.pk }}">
                    <h3>{{ Meaning.chinese }}-{{ Meaning.speech }}
                        <button type = "button" class = "btn btn-danger" onclick="delMeaning(this);">刪除</button></h3>
                    <p><em>例句：</em></p>
                    <p>英：{{ Meaning.enlish_sentences }}</p>
                    <p>中：{{ Meaning.chinese_sentences }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No Meaning are available.</p>
    {% endif %}

    <p><em>下方新增解釋</em></p>
    <form class = "form-horizontal" action="{% url 'words:AddMeaning'%}" method="POST">
        {% csrf_token %}
        <div class = "form-group">
            <label for="mean" class = "col-sm-2 control-label">中文解釋：</label>
            <div class = "col-sm-10">
                <input type="text" required name="meaning" id="mean" placeholder = "請輸入中文解釋">
            </div>
        </div>

        <div class = "form-group">
            <label for="english" class = "col-sm-2 control-label">例句(英)：</label>
            <div class = "col-sm-10">
                <input type="text" required name="english_sentences" id="english" placeholder = "請輸入例句(英)">
            </div>
        </div>

        <div class = "form-group">
            <label for="chinese" class = "col-sm-2 control-label">例句(中)</label>
            <div class = "col-sm-10">
                <input type="text" required name="chinese_sentences" id="chinese"  placeholder = "請輸入例句(中)">
            </div>
        </div>
        
        <div class = "form-group">
            <label for="sp" class = "col-sm-2 control-label">詞性：</label>
            <div class = "col-sm-10">
                <select name="speech" required id="sp">
                    <option value="n">名詞</option>
                    <option value="pron">代名詞</option>
                    <option value="v">動詞</option>
                    <option value="adj">形容詞</option>
                    <option value="adv">副詞</option>
                    <option value="prep">介系詞</option>
                    <option value="conj">連接詞</option>
                    <option value="int">感嘆詞</option>
                </select>
            </div>
        </div>

        <input type="hidden" name="id" value="{{ Voc_id }}">

        <div class = "form-group">
            <div class = "col-sm-offset-2 col-sm-10">
                <button type="submit" class = "btn btn-default">提交</button>
            </div>
        </div>
    </form>

    <p>
    <input type = "button" class = "btn btn-outline-link" value="回上頁?" onclick="location.href='{% url 'words:VocabularyEditor' Set_id %}'">
{% endblock %}